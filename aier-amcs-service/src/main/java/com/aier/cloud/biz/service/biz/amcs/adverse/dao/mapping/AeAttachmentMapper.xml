<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aier.cloud.biz.service.biz.amcs.adverse.dao.AeAttachmentMapper">
  <resultMap id="BaseResultMap" type="com.aier.cloud.biz.service.biz.amcs.adverse.entity.AeAttachment">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 23 16:34:04 CST 2018.
    --> 
    <id column="ID" jdbcType="DECIMAL" property="id" />
	<result column="FILE_ID" jdbcType="VARCHAR" property="fileId" />
	<result column="BASIC_ID" jdbcType="DECIMAL" property="basicId" />
	<result column="USING_SIGN" jdbcType="DECIMAL" property="usingSign" />
	<result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
	<result column="URL" jdbcType="VARCHAR" property="url" />
	<result column="FILE_SIZE" jdbcType="DECIMAL" property="fileSize" />
	<result column="TAG" jdbcType="VARCHAR" property="tag" />
	<result column="MODIFER" jdbcType="DECIMAL" property="modifer" />
	<result column="MODIFY_DATE" jdbcType="TIMESTAMP" property="modifyDate" />
  </resultMap>
  <sql id="BaseColumnList">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 23 16:34:04 CST 2018.
    -->
	FILE_ID, BASIC_ID, USING_SIGN, ID, FILE_NAME, URL, 	
	FILE_SIZE, TAG, MODIFER, MODIFY_DATE 
  </sql>
  <select id="findByFileId" resultType="com.aier.cloud.biz.service.biz.amcs.adverse.entity.AeAttachment">
  	select
	<include refid="BaseColumnList" />
	from T_AE_ATTACHMENT t
	where t.ATTACHMENT_FILE_ID = #{fileId}
  </select>
  <select id="findByCond" resultType="com.aier.cloud.basic.core.base.db.CamelKeyMap">
  	select
		t.ID, t.file_name, t.url, t.tag,t.basic_id, t.file_size, t.file_id
	from T_AE_ATTACHMENT t
	where t.USING_SIGN = 1
	<if test="cond.basicIds != null and cond.basicIds.size() > 0">
		and BASIC_ID in
		<foreach collection="cond.basicIds" index="index" item="item"
			separator="," open="(" close=")">
			#{item}
		</foreach>
	</if>
    <!-- 标签 -->
    <if test="cond.tag != null  and cond.tag != '' ">
  	  and t.tag = #{cond.tag}
    </if>
  </select>
  <select id="findByFileName" resultType="com.aier.cloud.biz.service.biz.amcs.adverse.entity.AeAttachment">
  	select
	<include refid="BaseColumnList" />
	from T_AE_ATTACHMENT t
	where t.file_name = #{fileName}
  </select>
  <select id="findByFileTag" resultType="com.aier.cloud.biz.service.biz.amcs.adverse.entity.AeAttachment">
  	select
		t.ID, t.file_name, t.url, t.tag, t.file_size, t.file_id
	from T_AE_ATTACHMENT t
	where t.USING_SIGN = 1 and t.basic_id = #{basicId} and t.tag = #{tag}
  </select>
  
  <select id="findByEventFile" resultType="com.aier.cloud.biz.service.biz.amcs.adverse.entity.AeAttachment">
  	select
		t.ID, t.file_name, t.url, t.tag, t.file_size, t.file_id
	from T_AE_ATTACHMENT t
	where t.USING_SIGN = 1 and t.basic_id = #{basicId}
	and t.file_id = #{fileId}
  </select>
</mapper>